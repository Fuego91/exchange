(this.webpackJsonpexchange=this.webpackJsonpexchange||[]).push([[0],{60:function(e,t,n){e.exports=n(72)},65:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),u=(n(65),n(32)),l=n(104),i=n(111),s=n(102),d=n(112),m=n(105),g=n(108),y=n(103),f=n(109),p=n(106),b=n(33),h={USD:{code:"USD",symbol:"$",fullName:"United States Dollar"},SEK:{code:"SEK",symbol:"kr",fullName:"Swedish Krona"},GBP:{code:"GBP",symbol:"\xa3",fullName:"British Pound"},PLN:{code:"PLN",symbol:"z\u0142",fullName:"Polish Zloty"}};function C(){var e=Object(u.a)(["\n  color: #0000008a;\n  padding-left: 5px;\n"]);return C=function(){return e},e}var E,v=b.a.span(C()),O=function(e){var t=e.selectedCurrency,n=e.onCurrencySelect;return a.a.createElement(p.a,{disableUnderline:!0,"data-testid":"currency-selector",value:t?t.code:null,displayEmpty:!t,onChange:function(e){e.target&&n(h[e.target.value])},renderValue:function(e){return e}},Object.keys(h).map((function(e){return t=h[e],a.a.createElement(f.a,{key:t.code,value:t.code},a.a.createElement("span",null,t.code),a.a.createElement(v,null,t.fullName));var t})))},x=n(110),j=n(101),S=function(e){var t=e.currencySymbol,n=e.amount,r=e.onAmountChange,c=e.isSource;return a.a.createElement(j.a,{disableUnderline:!0,value:n,onChange:function(e){var t=e.currentTarget.value,n=t?t.replace(",","."):t;/^\d*([\.]{1}\d{0,2})?$/g.test(n)&&r(n)},startAdornment:a.a.createElement((function(){return a.a.createElement(x.a,{position:"start"},c?"-":"+")}),null),endAdornment:a.a.createElement((function(){return a.a.createElement(x.a,{position:"end"},t)}),null),inputProps:{style:{width:5*n.length+50||50}}})},P=function(e){var t=e.selectedCurrency,n=e.amount,r=e.balance,c=e.onAmountChange,o=e.onCurrencySelect,u=e.isSource,l=e.isBalanceNegative;return a.a.createElement(s.a,{container:!0,spacing:0,justify:"space-between"},a.a.createElement(s.a,{item:!0,xs:2},a.a.createElement(O,{selectedCurrency:t,onCurrencySelect:o})),a.a.createElement(s.a,{item:!0,xs:"auto"},a.a.createElement(S,{amount:n,currencySymbol:t.symbol,isSource:u,onAmountChange:c})),a.a.createElement(s.a,{item:!0,xs:12},a.a.createElement(y.a,{error:l},"Balance:\xa0",r||0,"\xa0",t?t.symbol:"")))},w=n(30);!function(e){e.FlipInputsClicked="[Exchange] Flip Inputs Clicked",e.SourceAmountChanged="[Exchange] Source Amount Changed",e.SourceCurrencyChanged="[Exchange] Source Currency Changed",e.TargetAmountChanged="[Exchange] Target Amount Changed",e.TargetCurrencyChanged="[Exchange] Target Currency Changed",e.ExchangeClicked="[Exchange] Exchange Clicked",e.RatesUpdated="[Exchange] Rates updated",e.ClearAmounts="[Exchange] Clear Amounts",e.ExecuteExchange="[Balances] Execute Exchange"}(E||(E={}));var k=n(29);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e,t,n){return"1 ".concat(e.currency.symbol," = ").concat(n[t.currencyCode]," ").concat(t.currency.symbol)},B=function(e){var t=e.exchange,n=t.source,r=t.target,a=t.balances,c=!a[n.currencyCode]||+n.amount>a[n.currencyCode],o=D({},n,{currency:h[n.currencyCode],balance:t.balances[n.currencyCode]||0}),u=D({},r,{currency:h[r.currencyCode],balance:t.balances[r.currencyCode]||0});return D({},t,{source:o,target:u,isNegativeSourceBalance:c,isSubmitDisabled:!+n.amount||!+r.amount||!!c,baseRateLabel:N(o,u,t.rates)})},T=Object(i.a)(l.a)({borderRadius:50}),U=Object(i.a)(s.a)({marginTop:55,zIndex:1}),F=Object(i.a)(d.a)({minWidth:160,background:"#fff"}),I=function(){var e=Object(w.b)(),t=Object(w.c)(B),n=t.source,c=t.target,o=t.baseRateLabel,u=t.isNegativeSourceBalance,l=t.isSubmitDisabled;!function(e,t){var n=Object(r.useCallback)((function(){e&&fetch("".concat("https://api.exchangeratesapi.io","/latest?base=").concat(e)).then((function(e){return e.json()})).then((function(e){t(e.rates)}))}),[e]);Object(r.useEffect)((function(){n();var e=setInterval((function(){n()}),1e4);return function(){return clearInterval(e)}}),[e,n])}(n.currencyCode,(function(t){return e(function(e){return{type:E.RatesUpdated,payload:e}}(t))}));return a.a.createElement(U,{container:!0,spacing:3,justify:"space-between"},a.a.createElement(s.a,{item:!0,xs:12},a.a.createElement("div",{"data-testid":"source-input"},n&&a.a.createElement(P,{isSource:!0,amount:n.amount,balance:n.balance,isBalanceNegative:u,selectedCurrency:n.currency,onAmountChange:function(t){return e((n=t,{type:E.SourceAmountChanged,payload:n}));var n},onCurrencySelect:function(t){return e((n=t,{type:E.SourceCurrencyChanged,payload:n}));var n}}))),a.a.createElement(s.a,{item:!0,xs:2},a.a.createElement(m.a,{color:"primary","data-testid":"flip-btn","aria-label":"delete",size:"small",onClick:function(){return e({type:E.FlipInputsClicked})}},a.a.createElement(g.a,null))),a.a.createElement(s.a,{item:!0,xs:"auto"},a.a.createElement(F,{label:o,color:"primary",variant:"outlined"})),a.a.createElement(s.a,{item:!0,xs:12},a.a.createElement("div",{"data-testid":"target-input"},c&&a.a.createElement(P,{isSource:!1,amount:c.amount,balance:c.balance,selectedCurrency:c.currency,onAmountChange:function(t){return e((n=t,{type:E.TargetAmountChanged,payload:n}));var n},onCurrencySelect:function(t){return e((n=t,{type:E.TargetCurrencyChanged,payload:n}));var n}}))),a.a.createElement(s.a,{item:!0,xs:12},a.a.createElement(T,{variant:"contained",color:"secondary",fullWidth:!0,className:"exchange-btn",disabled:l,onClick:function(){return e({type:E.ExecuteExchange})}},"Exchange")))},R=n(17);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={source:{currencyCode:"PLN",amount:"0"},target:{currencyCode:"USD",amount:"0"},rates:{},balances:{PLN:1500,USD:1e3,SEK:500,GBP:3e3}},z=function(e,t,n){var r=n[t],a=+e/n[t]||0;return(r<1?Math.ceil(100*a)/100:Math.floor(100*a)/100).toFixed(2).toString()},G=function(e,t,n){var r=n[t],a=+e*r||0;return(r<1?Math.floor(100*a)/100:Math.ceil(100*a)/100).toFixed(2).toString()},W=function(e){return M({},e,{source:M({},e.target),target:M({},e.source)})},J=function(e,t){var n=t.payload;return M({},e,{source:M({},e.source,{amount:n}),target:M({},e.target,{amount:G(n,e.target.currencyCode,e.rates)})})},$=function(e,t){var n=t.payload;return M({},e,{target:M({},e.target,{amount:n}),source:M({},e.source,{amount:z(n,e.target.currencyCode,e.rates)})})},V=function(e,t){var n=t.payload;return n.code===e.target.currencyCode?W(e):M({},e,{source:M({},e.source,{currencyCode:n.code})})},Z=function(e,t){var n=t.payload,r=e.target,a=e.rates;return n.code===e.source.currencyCode?W(e):M({},e,{target:M({},e.target,{currencyCode:n.code}),source:M({},e.source,{amount:z(r.amount,n.code,a)})})},q=function(e,t){var n=t.payload,r=e.target,a=e.source;return M({},e,{rates:n,target:M({},r,{amount:G(a.amount,r.currencyCode,n)})})},H=function(e){var t,n=e.target,r=e.source,a=e.balances,c=a[r.currencyCode]||0,o=a[n.currencyCode]||0;return M({},e,{target:M({},n,{amount:"0"}),source:M({},r,{amount:"0"}),balances:M({},a,(t={},Object(k.a)(t,r.currencyCode,+(c-+r.amount).toFixed(2)),Object(k.a)(t,n.currencyCode,+(o+ +n.amount).toFixed(2)),t))})},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.FlipInputsClicked:return W(e);case E.SourceAmountChanged:return J(e,t);case E.TargetAmountChanged:return $(e,t);case E.SourceCurrencyChanged:return V(e,t);case E.TargetCurrencyChanged:return Z(e,t);case E.RatesUpdated:return q(e,t);case E.ExecuteExchange:return H(e);default:return e}},X=Object(R.combineReducers)({exchange:Q}),Y=n(50);function _(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  margin: auto;\n  min-width: 300px;\n  max-width: 500px;\n  padding: 0 40px;\n  background: #fff;\n  ::before {\n    position: fixed;\n    content: ' ';\n    bottom: 0;\n    right: 0;\n    width: 100%;\n    height: 50%;\n    background: #f8f8f8;\n  }\n"]);return _=function(){return e},e}var ee=Object(R.createStore)(X,Object(Y.composeWithDevTools)(Object(R.applyMiddleware)())),te=b.a.div(_());o.a.render(a.a.createElement((function(){return a.a.createElement(w.a,{store:ee},a.a.createElement(te,null,a.a.createElement(I,null)))}),null),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.8057327d.chunk.js.map